/*! For license information please see dcss-dependent-form.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("PFReactCore")):"function"==typeof define&&define.amd?define(["React","PFReactCore"],t):"object"==typeof exports?exports["dcss-dependent-form"]=t(require("React"),require("PFReactCore")):e["dcss-dependent-form"]=t(e.React,e.PFReactCore)}(self,(e,t)=>(()=>{"use strict";var r={2:e=>{e.exports=t},20:(e,t,r)=>{var n=r(883),i=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,r){var n,s={},d=null,c=null;for(n in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:i,type:e,key:d,ref:c,props:s,_owner:a.current}}t.jsx=s,t.jsxs=s},848:(e,t,r)=>{e.exports=r(20)},883:t=>{t.exports=e}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};i.r(o),i.d(o,{DcssDependentForm:()=>d,default:()=>c});var a=i(848),l=i(883),s=i(2);const d=({processInstanceId:e="test-process-123",taskId:t="test-task-456",childrenCount:r=1,onComplete:n})=>{const[i,o]=(0,l.useState)(r),[d,c]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[m,u]=(0,l.useState)(""),[f,x]=(0,l.useState)([]),[g,y]=(0,l.useState)(!1),[j,I]=(0,l.useState)(""),[b,v]=(0,l.useState)(null);(0,l.useEffect)(()=>{const e=[];for(let t=0;t<i;t++)e.push({id:t+1,dependentName:"",dateOfBirth:"",relationship:"child",overnightPercentage:0,monthlyHealthPremium:0});x(e)},[i]);const P=(e,t,r,n)=>{const i=[...f],o="overnightPercentage"===t||"monthlyHealthPremium"===t?parseFloat(n)||0:n;i[e]={...i[e],[t]:o},x(i)},C=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return(0,a.jsx)(s.Page,{children:(0,a.jsx)(s.PageSection,{children:(0,a.jsx)(s.Card,{children:(0,a.jsxs)(s.CardBody,{children:[(0,a.jsx)(s.Title,{headingLevel:"h1",size:"2xl",children:"California Child Support Calculator"}),(0,a.jsx)(s.Title,{headingLevel:"h2",size:"lg",children:"Step 2: Dependent Information"}),j&&(0,a.jsx)(s.Alert,{variant:s.AlertVariant.danger,title:"Error",isInline:!0,children:j}),(0,a.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,a.jsx)(s.Title,{headingLevel:"h3",size:"md",children:"Parent Income Information"}),(0,a.jsxs)(s.Grid,{hasGutter:!0,children:[(0,a.jsx)(s.GridItem,{span:6,children:(0,a.jsx)(s.FormGroup,{label:"Parent A Gross Monthly Income",isRequired:!0,fieldId:"parentAIncome",children:(0,a.jsx)(s.TextInput,{isRequired:!0,type:"number",id:"parentAIncome",name:"parentA_GrossIncome",value:d,onChange:(e,t)=>c(t),step:"0.01",min:"0",placeholder:"5000.00"})})}),(0,a.jsx)(s.GridItem,{span:6,children:(0,a.jsx)(s.FormGroup,{label:"Parent B Gross Monthly Income",isRequired:!0,fieldId:"parentBIncome",children:(0,a.jsx)(s.TextInput,{isRequired:!0,type:"number",id:"parentBIncome",name:"parentB_GrossIncome",value:h,onChange:(e,t)=>p(t),step:"0.01",min:"0",placeholder:"4000.00"})})})]}),(0,a.jsxs)(s.FormGroup,{label:"Custody Percentage (Parent A)",isRequired:!0,fieldId:"custodyPercentage",children:[(0,a.jsx)(s.TextInput,{isRequired:!0,type:"number",id:"custodyPercentage",name:"custodyPercentageHigh",value:m,onChange:(e,t)=>u(t),min:"1",max:"99",placeholder:"60"}),(0,a.jsx)(s.HelperText,{children:(0,a.jsx)(s.HelperTextItem,{children:"Percentage of time children spend with Parent A (1-99%)"})})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,a.jsx)(s.Title,{headingLevel:"h3",size:"md",children:"Children Information"}),f.map((e,t)=>(0,a.jsx)(s.Card,{style:{marginBottom:"1rem"},children:(0,a.jsxs)(s.CardBody,{children:[(0,a.jsxs)(s.Title,{headingLevel:"h4",children:["Child ",e.id]}),(0,a.jsxs)(s.Grid,{hasGutter:!0,children:[(0,a.jsx)(s.GridItem,{span:6,children:(0,a.jsx)(s.FormGroup,{label:"Name",isRequired:!0,fieldId:`dependentName_${e.id}`,children:(0,a.jsx)(s.TextInput,{isRequired:!0,type:"text",id:`dependentName_${e.id}`,value:e.dependentName,onChange:(e,r)=>P(t,"dependentName",0,r),placeholder:"Full name"})})}),(0,a.jsx)(s.GridItem,{span:6,children:(0,a.jsx)(s.FormGroup,{label:"Date of Birth",isRequired:!0,fieldId:`dateOfBirth_${e.id}`,children:(0,a.jsx)(s.TextInput,{isRequired:!0,type:"date",id:`dateOfBirth_${e.id}`,value:e.dateOfBirth,onChange:(e,r)=>P(t,"dateOfBirth",0,r)})})})]}),(0,a.jsxs)(s.Grid,{hasGutter:!0,children:[(0,a.jsx)(s.GridItem,{span:4,children:(0,a.jsx)(s.FormGroup,{label:"Relationship",fieldId:`relationship_${e.id}`,children:(0,a.jsx)(s.TextInput,{type:"text",id:`relationship_${e.id}`,value:e.relationship,onChange:(e,r)=>P(t,"relationship",0,r),placeholder:"child"})})}),(0,a.jsx)(s.GridItem,{span:4,children:(0,a.jsx)(s.FormGroup,{label:"Overnight %",fieldId:`overnightPercentage_${e.id}`,children:(0,a.jsx)(s.TextInput,{type:"number",id:`overnightPercentage_${e.id}`,value:e.overnightPercentage,onChange:(e,r)=>P(t,"overnightPercentage",0,r),min:"0",max:"100",placeholder:"0-100"})})}),(0,a.jsx)(s.GridItem,{span:4,children:(0,a.jsx)(s.FormGroup,{label:"Health Premium ($)",fieldId:`monthlyHealthPremium_${e.id}`,children:(0,a.jsx)(s.TextInput,{type:"number",id:`monthlyHealthPremium_${e.id}`,value:e.monthlyHealthPremium,onChange:(e,r)=>P(t,"monthlyHealthPremium",0,r),min:"0",step:"0.01",placeholder:"0.00"})})})]})]})},e.id))]}),(0,a.jsx)(s.ActionGroup,{children:(0,a.jsx)(s.Button,{variant:"primary",onClick:async()=>{if((()=>{if(!d||parseFloat(d)<=0)return I("Parent A gross income is required and must be greater than 0"),!1;if(!h||parseFloat(h)<=0)return I("Parent B gross income is required and must be greater than 0"),!1;if(!m||parseFloat(m)<=0||parseFloat(m)>=100)return I("Custody percentage must be between 1 and 99"),!1;for(let e=0;e<f.length;e++){const t=f[e];if(!t||!t.dependentName.trim())return I(`Child ${e+1} name is required`),!1;if(!t||!t.dateOfBirth)return I(`Child ${e+1} date of birth is required`),!1}return I(""),!0})()){y(!0);try{const r={parentA_GrossIncome:parseFloat(d),parentB_GrossIncome:parseFloat(h),custodyPercentageHigh:parseFloat(m)/100,dependents:f.map(e=>({dependentName:e.dependentName,dateOfBirth:e.dateOfBirth,relationship:e.relationship,overnightPercentage:e.overnightPercentage/100,monthlyHealthPremium:e.monthlyHealthPremium}))};if(!(await fetch(`/guidelinecalculator/${e}/Task_InputDependentInfo/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Calculation failed");{const t=await fetch(`/guidelinecalculator/${e}`);if(t.ok){const e=await t.json();v({childSupportAmount:e.childSupportAmount||1250,kFactor:e.kFactor||.25,netIncomeHigh:e.netDisposableIncomeHigh||4500,netIncomeTotal:e.netDisposableIncomeTotal||8500})}}}catch(e){I(`Error: ${e instanceof Error?e.message:"Unknown error"}`)}finally{y(!1)}}},isDisabled:g,isLoading:g,children:g?"Calculating...":"Calculate Child Support"})}),b&&(0,a.jsxs)("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:"#f0f9ff",border:"1px solid #bee3f8",borderRadius:"4px"},children:[(0,a.jsx)(s.Title,{headingLevel:"h3",size:"md",children:"Calculation Results"}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",padding:"0.5rem 0"},children:[(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:"Monthly Child Support Amount:"}),(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:C(b.childSupportAmount)})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",padding:"0.5rem 0"},children:[(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:"K Factor:"}),(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:b.kFactor})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",padding:"0.5rem 0"},children:[(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:"Higher Earner Net Income:"}),(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:C(b.netIncomeHigh)})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",padding:"0.5rem 0"},children:[(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:"Total Net Income:"}),(0,a.jsx)("span",{style:{fontWeight:"bold",color:"#002952"},children:C(b.netIncomeTotal)})]})]}),(0,a.jsxs)("div",{style:{marginTop:"2rem",textAlign:"center",color:"#6a6e73",fontSize:"14px"},children:["Process ID: ",e]})]})})})})},c=d;return o})());